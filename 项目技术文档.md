# 待定

## 初始化

* 项目创建 `npm init vue@latest`，安装项目依赖`npm install`，运行初始项目`npm run dev`

* 清理无用文件

* 项目配置：配置项目的icon、配置项目的标题、配置jsconfig.json

* 添加相关目录：assets,hooks,views...

* CSS样式的重置：

  * ` npm install normalize.css`
  * 创建reset.css、common.css，通过import在index.css中导入
  
* 路由配置：
  
  * `npm install vue-router`
  * 进行页面及路由的相关配置

* 状态管理配置：
  * `npm install pinia`
  * 进行stores目录文件的相关配置



## 编写

* 首先编写tabbar页面。(`npm install less -D`)

* 使用vant组件库
  * 安装库`npm install vant`
  * 安装插件(按需引入)`npm i unplugin-vue-components -D`
  
* 开始写home页面，将home页面拆分成不同组件

  * tabbar的处理：

  1. 路由添加属性，通过v-if/v-show来进行隐藏
  2. 使用css，并抽离出来封装成公共样式

  ~~~css
  /*tabbar的显示与隐藏方式 */
  .top-page {
    position: relative;
    z-index: 9;
    height: 100vh;
    background-color: #fff;
    /* 在视口里进行滚动而不是页面进行滚动 */
    overflow-y: auto;
  }
  ~~~

  * 写位置信息，city页面

    * 用vant组件库`van-search`写搜索框
    * 用vant组件库`van-tabs`写切换布局

  * 对axios进行二次封装`npm install axios`

    * 首先封装axios
    * 将请求交给service下modules以及通过pinia下store管理

  * 写city-group组件

    * 使用vant组件库同时进行部分修改
    * 从组件部分传值再通过props拿到数据进行处理

    ~~~js
    --city
    <city-group v-show="tabActive === key" :group-data="value" />
    
     --city-group
    // 定义props
    const props = defineProps({
      groupData: {
        type: Object,
        default: () => ({})
      }
    })    
    ~~~

    * 对`van-index-bar`列表进行修改动态索引

    ~~~js
    const indexList = computed(() => {
      const list = props.groupData.cities.map(item => item.group)
      list.unshift("#")
      return list
    })
    ~~~

    * 点击实现城市回退和回显

    ~~~js
    // 监听城市的点击
    const router = useRouter()
    const cityStore = useCityStore()
    const cityClick = (city) => {
      // 选中当前城市
      cityStore.currentCity = city
      // 返回上一级
      router.back()
    }
    ~~~

  * 写日历范围
    * 安装dayjs库，`npm i dayjs`并封装工具函数`format_date.js`
    * 日历组件采用vant组件库`van-calendar`
  * 停留天数的动态计算

  ~~~js
  --format_date.js
  export function getDiffDays(startDate, endDate) {
    return dayjs(endDate).diff(startDate, "day")
  }
  
  --home-search-box.vue
  const stayCount = ref(getDiffDays(startDate.value, endDate.value))
  ~~~

  * 热门建议数据获取，在services中发送网络请求，store存储数据，vue页面中拿到store的数据并处理（数据请求分层结构）





